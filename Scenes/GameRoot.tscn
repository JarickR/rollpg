[gd_scene load_steps=14 format=3 uid="uid://dalkd4gr4dlrq"]

[ext_resource type="Script" uid="uid://dveyfoinsfkbe" path="res://Scripts/Godot/Game.cs" id="1"]
[ext_resource type="Script" uid="uid://ejg081jx0w6i" path="res://Scripts/Godot/BattleRoot.cs" id="2_vt32t"]
[ext_resource type="Script" uid="uid://bbssubg6gnpyc" path="res://Scripts/Godot/UI/TextEditCaretGuard.cs" id="3_ffosx"]
[ext_resource type="PackedScene" uid="uid://ri28ks3ndpg3" path="res://Scenes/HPBar.tscn" id="4_58i56"]
[ext_resource type="Script" uid="uid://55v6vsget2xt" path="res://Scripts/Godot/UI/RollButtonController.cs" id="4_l7tus"]
[ext_resource type="Texture2D" uid="uid://cedfy1moklbi4" path="res://Content/Icons/DefensiveIcon.png" id="4_o8ewf"]
[ext_resource type="Script" uid="uid://woaa4qt3pt5d" path="res://Scripts/Godot/UI/RollPopupSpawner.cs" id="4_ppc7m"]
[ext_resource type="Texture2D" uid="uid://dswtic4py86sq" path="res://Content/Icons/UpgradeIcon.png" id="5_aob1w"]
[ext_resource type="PackedScene" uid="uid://d1etmrap0y04m" path="res://Scenes/RollPopup.tscn" id="5_l7tus"]
[ext_resource type="Script" uid="uid://emvjb148wv62" path="res://Scripts/Godot/LoadoutToBattleBridge.cs" id="7_7vkth"]
[ext_resource type="PackedScene" uid="uid://djwyy84baep1n" path="res://Scenes/LoadoutScreen.tscn" id="8_o8ewf"]
[ext_resource type="PackedScene" uid="uid://yyf8aq04mcur" path="res://Scenes/UpgradeTile.tscn" id="9_58i56"]
[ext_resource type="PackedScene" uid="uid://coig18xlcwjcp" path="res://Scenes/DefensiveTile.tscn" id="10_ppc7m"]

[node name="GameRoot" type="Control"]
z_index = 100
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
size_flags_vertical = 3
mouse_filter = 2
script = ExtResource("1")

[node name="BattleRoot" type="Control" parent="."]
unique_name_in_owner = true
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
script = ExtResource("2_vt32t")

[node name="PlayerSpawnsRoot" type="Node3D" parent="BattleRoot"]

[node name="Spawn0" type="Node3D" parent="BattleRoot/PlayerSpawnsRoot"]

[node name="Spawn1" type="Node3D" parent="BattleRoot/PlayerSpawnsRoot"]

[node name="Spawn2" type="Node3D" parent="BattleRoot/PlayerSpawnsRoot"]

[node name="Spawn3" type="Node3D" parent="BattleRoot/PlayerSpawnsRoot"]

[node name="LogLabel" type="Label" parent="BattleRoot"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 23.0
script = ExtResource("3_ffosx")

[node name="Layout" type="VBoxContainer" parent="BattleRoot"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
theme_override_constants/separation = 12

[node name="EnemyRow" type="HBoxContainer" parent="BattleRoot/Layout"]
layout_mode = 2
mouse_filter = 2

[node name="EnemyPanel1" type="PanelContainer" parent="BattleRoot/Layout/EnemyRow"]
layout_mode = 2
size_flags_horizontal = 3
mouse_filter = 2

[node name="VBoxContainer" type="HBoxContainer" parent="BattleRoot/Layout/EnemyRow/EnemyPanel1"]
layout_mode = 2
mouse_filter = 2
theme_override_constants/separation = 8

[node name="Label" type="Label" parent="BattleRoot/Layout/EnemyRow/EnemyPanel1/VBoxContainer"]
layout_mode = 2
text = "Enemy 1"

[node name="VBoxContainer" type="VBoxContainer" parent="BattleRoot/Layout/EnemyRow/EnemyPanel1/VBoxContainer"]
layout_mode = 2
mouse_filter = 2

[node name="HP" type="Label" parent="BattleRoot/Layout/EnemyRow/EnemyPanel1/VBoxContainer/VBoxContainer"]
layout_mode = 2
text = "HP"

[node name="ARM" type="Label" parent="BattleRoot/Layout/EnemyRow/EnemyPanel1/VBoxContainer/VBoxContainer"]
layout_mode = 2
text = "ARM"

[node name="EnemyPanel2" type="PanelContainer" parent="BattleRoot/Layout/EnemyRow"]
layout_mode = 2
size_flags_horizontal = 3
mouse_filter = 2

[node name="VBoxContainer" type="HBoxContainer" parent="BattleRoot/Layout/EnemyRow/EnemyPanel2"]
layout_mode = 2
mouse_filter = 2
theme_override_constants/separation = 8

[node name="Label" type="Label" parent="BattleRoot/Layout/EnemyRow/EnemyPanel2/VBoxContainer"]
layout_mode = 2
text = "Enemy 1"

[node name="VBoxContainer" type="VBoxContainer" parent="BattleRoot/Layout/EnemyRow/EnemyPanel2/VBoxContainer"]
layout_mode = 2
mouse_filter = 2

[node name="HP" type="Label" parent="BattleRoot/Layout/EnemyRow/EnemyPanel2/VBoxContainer/VBoxContainer"]
layout_mode = 2
text = "HP"

[node name="ARM" type="Label" parent="BattleRoot/Layout/EnemyRow/EnemyPanel2/VBoxContainer/VBoxContainer"]
layout_mode = 2
text = "ARM"

[node name="LogRow" type="HBoxContainer" parent="BattleRoot/Layout"]
layout_mode = 2
mouse_filter = 2

[node name="LogPanel" type="PanelContainer" parent="BattleRoot/Layout/LogRow"]
layout_mode = 2
size_flags_horizontal = 3
mouse_filter = 2

[node name="LogLabel" type="RichTextLabel" parent="BattleRoot/Layout/LogRow"]
custom_minimum_size = Vector2(0, 180)
layout_mode = 2
mouse_filter = 2

[node name="HeroRow" type="HBoxContainer" parent="BattleRoot/Layout"]
layout_mode = 2
mouse_filter = 2

[node name="HeroPanel1" type="PanelContainer" parent="BattleRoot/Layout/HeroRow"]
layout_mode = 2
mouse_filter = 2

[node name="VBoxContainer" type="VBoxContainer" parent="BattleRoot/Layout/HeroRow/HeroPanel1"]
layout_mode = 2
mouse_filter = 2

[node name="HeroPanelLayout" type="HBoxContainer" parent="BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer"]
layout_mode = 2
mouse_filter = 2

[node name="ClassIconBig" type="TextureRect" parent="BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer/HeroPanelLayout"]
custom_minimum_size = Vector2(128, 128)
layout_mode = 2
size_flags_horizontal = 3
mouse_filter = 2
stretch_mode = 5

[node name="NameLabel" type="Label" parent="BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer/HeroPanelLayout"]
layout_mode = 2
size_flags_vertical = 6
text = "Hero 1"

[node name="Header" type="VBoxContainer" parent="BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer/HeroPanelLayout"]
layout_mode = 2
size_flags_horizontal = 3
mouse_filter = 2

[node name="HpBar" parent="BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer/HeroPanelLayout/Header" instance=ExtResource("4_58i56")]
layout_mode = 2
mouse_filter = 2

[node name="ARMLabel" type="Label" parent="BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer/HeroPanelLayout/Header"]
layout_mode = 2
size_flags_horizontal = 6
text = "5"

[node name="StatusRow" type="HBoxContainer" parent="BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer"]
layout_mode = 2
mouse_filter = 2

[node name="StatusLabel" type="Label" parent="BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer/StatusRow"]
layout_mode = 2
text = "Status Effects:"

[node name="StatusIcons" type="HFlowContainer" parent="BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer/StatusRow"]
layout_mode = 2
mouse_filter = 2

[node name="HUDRow" type="HBoxContainer" parent="BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer"]
layout_mode = 2
mouse_filter = 2

[node name="Slot1" type="TextureRect" parent="BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer/HUDRow"]
custom_minimum_size = Vector2(64, 64)
layout_mode = 2
mouse_filter = 2
stretch_mode = 5

[node name="Slot2" type="TextureRect" parent="BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer/HUDRow"]
custom_minimum_size = Vector2(64, 64)
layout_mode = 2
mouse_filter = 2
stretch_mode = 5

[node name="Slot3" type="TextureRect" parent="BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer/HUDRow"]
custom_minimum_size = Vector2(64, 64)
layout_mode = 2
mouse_filter = 2
stretch_mode = 5

[node name="Slot4" type="TextureRect" parent="BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer/HUDRow"]
custom_minimum_size = Vector2(64, 64)
layout_mode = 2
mouse_filter = 2
stretch_mode = 5

[node name="Slot5" type="TextureRect" parent="BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer/HUDRow"]
custom_minimum_size = Vector2(64, 64)
layout_mode = 2
mouse_filter = 2
stretch_mode = 5

[node name="Slot6" type="TextureRect" parent="BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer/HUDRow"]
custom_minimum_size = Vector2(64, 64)
layout_mode = 2
mouse_filter = 2
stretch_mode = 5

[node name="HeroPanel2" type="PanelContainer" parent="BattleRoot/Layout/HeroRow"]
layout_mode = 2
size_flags_horizontal = 3

[node name="VBoxContainer" type="VBoxContainer" parent="BattleRoot/Layout/HeroRow/HeroPanel2"]
layout_mode = 2

[node name="HeroPanelLayout" type="HBoxContainer" parent="BattleRoot/Layout/HeroRow/HeroPanel2/VBoxContainer"]
layout_mode = 2

[node name="NameLabel" type="Label" parent="BattleRoot/Layout/HeroRow/HeroPanel2/VBoxContainer/HeroPanelLayout"]
layout_mode = 2
size_flags_vertical = 6
text = "Hero 2"

[node name="Header" type="VBoxContainer" parent="BattleRoot/Layout/HeroRow/HeroPanel2/VBoxContainer/HeroPanelLayout"]
layout_mode = 2
size_flags_horizontal = 3

[node name="HPLabel" type="Label" parent="BattleRoot/Layout/HeroRow/HeroPanel2/VBoxContainer/HeroPanelLayout/Header"]
layout_mode = 2
size_flags_horizontal = 6
size_flags_vertical = 0
text = "20"

[node name="ARMLabel" type="Label" parent="BattleRoot/Layout/HeroRow/HeroPanel2/VBoxContainer/HeroPanelLayout/Header"]
layout_mode = 2
size_flags_horizontal = 6
text = "5"

[node name="StatusRow" type="HBoxContainer" parent="BattleRoot/Layout/HeroRow/HeroPanel2/VBoxContainer"]
layout_mode = 2

[node name="StatusLabel" type="Label" parent="BattleRoot/Layout/HeroRow/HeroPanel2/VBoxContainer/StatusRow"]
layout_mode = 2
text = "Status Effects:"

[node name="StatusIcons" type="HFlowContainer" parent="BattleRoot/Layout/HeroRow/HeroPanel2/VBoxContainer/StatusRow"]
layout_mode = 2

[node name="HUDRow" type="HBoxContainer" parent="BattleRoot/Layout/HeroRow/HeroPanel2/VBoxContainer"]
layout_mode = 2

[node name="Slot1" type="TextureRect" parent="BattleRoot/Layout/HeroRow/HeroPanel2/VBoxContainer/HUDRow"]
custom_minimum_size = Vector2(64, 64)
layout_mode = 2
stretch_mode = 5

[node name="Slot2" type="TextureRect" parent="BattleRoot/Layout/HeroRow/HeroPanel2/VBoxContainer/HUDRow"]
custom_minimum_size = Vector2(64, 64)
layout_mode = 2
stretch_mode = 5

[node name="Slot3" type="TextureRect" parent="BattleRoot/Layout/HeroRow/HeroPanel2/VBoxContainer/HUDRow"]
custom_minimum_size = Vector2(64, 64)
layout_mode = 2
stretch_mode = 5

[node name="Slot4" type="TextureRect" parent="BattleRoot/Layout/HeroRow/HeroPanel2/VBoxContainer/HUDRow"]
custom_minimum_size = Vector2(64, 64)
layout_mode = 2
stretch_mode = 5

[node name="Slot5" type="TextureRect" parent="BattleRoot/Layout/HeroRow/HeroPanel2/VBoxContainer/HUDRow"]
custom_minimum_size = Vector2(64, 64)
layout_mode = 2
stretch_mode = 5

[node name="Slot6" type="TextureRect" parent="BattleRoot/Layout/HeroRow/HeroPanel2/VBoxContainer/HUDRow"]
custom_minimum_size = Vector2(64, 64)
layout_mode = 2
stretch_mode = 5

[node name="RollBtn" type="Button" parent="BattleRoot/Layout"]
custom_minimum_size = Vector2(120, 32)
layout_mode = 2
size_flags_vertical = 4
text = "ROLL"
script = ExtResource("4_l7tus")
PopupSpawnerPath = NodePath("../../RollPopupLayer")
AnchorControlPath = NodePath("../HeroRow/HeroPanel1")
DieText = "d6"
Sides = 6
CritOnMax = false
FailOnMin = false

[node name="RollPopupLayer" type="CanvasLayer" parent="BattleRoot"]
script = ExtResource("4_ppc7m")
RollPopupScene = ExtResource("5_l7tus")

[node name="LoadoutToBattleBridge" type="Node" parent="." node_paths=PackedStringArray("Slot1", "Slot2", "Slot3", "Slot4", "Slot5", "Slot6", "Hero1ClassPortrait")]
unique_name_in_owner = true
script = ExtResource("7_7vkth")
Slot1 = NodePath("../BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer/HUDRow/Slot1")
Slot2 = NodePath("../BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer/HUDRow/Slot2")
Slot3 = NodePath("../BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer/HUDRow/Slot3")
Slot4 = NodePath("../BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer/HUDRow/Slot4")
Slot5 = NodePath("../BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer/HUDRow/Slot5")
Slot6 = NodePath("../BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer/HUDRow/Slot6")
Hero1ClassPortrait = NodePath("../BattleRoot/Layout/HeroRow/HeroPanel1/VBoxContainer/HeroPanelLayout/ClassIconBig")
DefensiveIcon = ExtResource("4_o8ewf")
UpgradeIcon = ExtResource("5_aob1w")

[node name="LoadoutScreen" parent="." instance=ExtResource("8_o8ewf")]
layout_mode = 1

[node name="LayoutRoot" parent="LoadoutScreen" index="0"]
mouse_filter = 0

[node name="PartySizeButtonContainer" parent="LoadoutScreen/LayoutRoot" index="0"]
mouse_filter = 0

[node name="HeaderRow" parent="LoadoutScreen/LayoutRoot" index="1"]
mouse_filter = 0

[node name="Spacer" parent="LoadoutScreen/LayoutRoot/HeaderRow" index="0"]
mouse_filter = 2

[node name="FinalizeBtn" parent="LoadoutScreen/LayoutRoot/HeaderRow" index="1"]
z_index = 1

[node name="MainRow" parent="LoadoutScreen/LayoutRoot" index="2"]
mouse_filter = 2

[node name="LeftPanel" parent="LoadoutScreen/LayoutRoot/MainRow" index="0"]
mouse_filter = 2

[node name="RightPanel" parent="LoadoutScreen/LayoutRoot/MainRow" index="1"]
columns = 4

[node name="PlayerLoadoutPanel" parent="LoadoutScreen/LayoutRoot/MainRow/RightPanel" index="0"]
ClassSelectionContainerPath = NodePath("MarginContainer/VBoxContainer/ClassSelectionContainer")
Tier1SpellContainerPath = NodePath("MarginContainer/VBoxContainer/Tier1SpellContainer")
Tier2SpellContainerPath = NodePath("MarginContainer/VBoxContainer/Tier2SpellContainer")
LoadoutContainerPath = NodePath("MarginContainer/VBoxContainer/LoadoutContainer")
UpgradeSlotScene = ExtResource("9_58i56")
DefensiveSlotScene = ExtResource("10_ppc7m")

[node name="PlayerNameLabel" parent="LoadoutScreen/LayoutRoot/MainRow/RightPanel/PlayerLoadoutPanel/MarginContainer/VBoxContainer" index="0"]
text = "Player 1"

[node name="ClassSelectionContainer" parent="LoadoutScreen/LayoutRoot/MainRow/RightPanel/PlayerLoadoutPanel/MarginContainer/VBoxContainer" index="2"]
mouse_filter = 0

[node name="LoadoutContainer" parent="LoadoutScreen/LayoutRoot/MainRow/RightPanel/PlayerLoadoutPanel/MarginContainer/VBoxContainer" index="8"]
size_flags_vertical = 3

[node name="PlayerLoadoutPanel2" parent="LoadoutScreen/LayoutRoot/MainRow/RightPanel" index="1"]
ClassSelectionContainerPath = NodePath("MarginContainer/VBoxContainer/ClassSelectionContainer")
Tier1SpellContainerPath = NodePath("MarginContainer/VBoxContainer/Tier1SpellContainer")
Tier2SpellContainerPath = NodePath("MarginContainer/VBoxContainer/Tier2SpellContainer")
LoadoutContainerPath = NodePath("MarginContainer/VBoxContainer/LoadoutContainer")
UpgradeSlotScene = ExtResource("9_58i56")
DefensiveSlotScene = ExtResource("10_ppc7m")

[node name="PlayerLoadoutPanel3" parent="LoadoutScreen/LayoutRoot/MainRow/RightPanel" index="2"]
ClassSelectionContainerPath = NodePath("MarginContainer/VBoxContainer/ClassSelectionContainer")
Tier1SpellContainerPath = NodePath("MarginContainer/VBoxContainer/Tier1SpellContainer")
Tier2SpellContainerPath = NodePath("MarginContainer/VBoxContainer/Tier2SpellContainer")
LoadoutContainerPath = NodePath("MarginContainer/VBoxContainer/LoadoutContainer")
UpgradeSlotScene = ExtResource("9_58i56")
DefensiveSlotScene = ExtResource("10_ppc7m")

[node name="VBoxContainer" parent="LoadoutScreen/LayoutRoot/MainRow/RightPanel/PlayerLoadoutPanel3/MarginContainer" index="0"]
mouse_filter = 2

[node name="PlayerLoadoutPanel4" parent="LoadoutScreen/LayoutRoot/MainRow/RightPanel" index="3"]
ClassSelectionContainerPath = NodePath("MarginContainer/VBoxContainer/ClassSelectionContainer")
Tier1SpellContainerPath = NodePath("MarginContainer/VBoxContainer/Tier1SpellContainer")
Tier2SpellContainerPath = NodePath("MarginContainer/VBoxContainer/Tier2SpellContainer")
LoadoutContainerPath = NodePath("MarginContainer/VBoxContainer/LoadoutContainer")
UpgradeSlotScene = ExtResource("9_58i56")
DefensiveSlotScene = ExtResource("10_ppc7m")

[editable path="LoadoutScreen"]
[editable path="LoadoutScreen/LayoutRoot/MainRow/RightPanel/PlayerLoadoutPanel"]
[editable path="LoadoutScreen/LayoutRoot/MainRow/RightPanel/PlayerLoadoutPanel2"]
[editable path="LoadoutScreen/LayoutRoot/MainRow/RightPanel/PlayerLoadoutPanel3"]
[editable path="LoadoutScreen/LayoutRoot/MainRow/RightPanel/PlayerLoadoutPanel4"]
